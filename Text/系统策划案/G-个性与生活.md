### 个性与生活系统与交互设计

- **个性结构**：每个“个性”记录为结构体：{个性ID、trait列表、日常routine、情感状态、互动偏好}，储存在角色个人档案中。
- **交互方式**：系统通过情感互动和日常事件触发个性响应，如独特对话、行为选择、关系发展。与角色生命周期整合：在成长阶段通过教育事件塑造trait，在成年阶段通过社交事件调整情感状态。
- **数值表**：
  - `trait类型表`：如勇敢、懒惰、友好等，影响行为倾向、技能学习、事件结果。
  - `情感影响矩阵`：定义不同互动对情感的正负影响权重。
  - `routine概率表`：计算日常活动在不同个性下的发生概率。
- **行为树设计**：每个角色绑定行为树模板（如“外向型”“内向型”），通过情感系统输入当前状态和事件，决定执行分支。链接生命周期：行为树在衰老阶段添加debuff影响。
- **状态机设计**：
  - 状态枚举如：快乐、沮丧、兴奋、平静。
  - 触发器：事件发生（如社交成功）、trait激活（如勇敢面对危险）、routine完成。
  - 状态流转：如“沮丧”→“社交”→“缓解”→“快乐”。
- **流程概览**：
  1. 系统tick检查个性状态；
  2. 触发事件评估；
  3. 进入相应情感状态；
  4. 执行互动响应（对话、活动等）；
  5. 更新档案并记录变化，与传记事件列表同步（参考R-角色生命周期.md）。

#### 与角色生命周期的整合
- **出生与成长阶段**：个性trait初始由基因和教育事件决定，日常routine从儿童期开始形成。
- **成年与衰老阶段**：生活事件影响情感状态，个性偏好驱动社会互动和命运选择。
- **死亡与传承**：个性记录传承给后代，影响新角色的初始trait。