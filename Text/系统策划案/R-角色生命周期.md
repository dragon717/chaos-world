### 角色生命周期系统与交互设计

#### 系统概述
角色生命周期系统模拟角色从出生到死亡的全过程，强调“事件驱动+阶段演化”的方法。系统聚焦五个核心阶段：出生、成长、成年、衰老、死亡，并可选进入“传承延续”阶段。生命周期整合命运、性格、教育、社交、生态、家族与传承系统，每个阶段通过关键节点事件推动角色变化，形成可追溯的人物传记。

- **生命周期结构**：每个角色生命周期为结构体：
  {
    角色ID,
    当前阶段,
    基因模板ID,
    天赋ID[],
    人格五维,
    事件列表[],
    传承记录ID[],
    死因（可为空）
  }
- **交互方式**：通过阶段推进事件系统推动角色演化。
  示例：
  - 教育阶段 → 触发“认知启蒙”事件 → 增加“开放性”属性；
  - 成年阶段 → 参与“部族选举” → 获得“领导者”标签。
- **数值表**：
  - `阶段类型表`：出生（基因决定外貌/天赋）、教育（性格五维形成）、成年（社会化事件）、衰老（debuff积累）、死亡（原因概率）、延续（继承权重）。
  - `基因影响矩阵`：定义基因对天赋/天命的权重（e.g. 父母基因混合，文化影响变异率+10%）。
  - `事件概率表`：计算关键节点事件概率（e.g. 战争中死亡率+20%，科技医疗降低疾病debuff 15%）。
- **行为树设计**：每个角色绑定行为树模板（如“成长型”“传承型”），通过阶段输入（e.g. 教育中模仿师长）决定分支，与个性系统联动。
- **状态机设计**：
  - 状态枚举如：婴儿、儿童、青少年、成年、老年、死亡。
  - 触发器：时间周期（e.g. 年龄增长）、事件（e.g. 结识朋友形成集体）、外部影响（e.g. 家族继承、宗教仪式）。
  - 状态流转：如“儿童”→“教育”（学习技能）→“青少年”（人格形成）→“成年”（社会化）→“老年”（debuff）→“死亡”（延续后代）。
- **人格模型**：五维性格字段（OCEAN模型）
  - 开放性（Openness）
  - 尽责性（Conscientiousness）
  - 外向性（Extraversion）
  - 宜人性（Agreeableness）
  - 情绪稳定性（Neuroticism，反向）
  - 每维范围：0~100，初始由教育+事件决定，后续微调。
- **流程概览**：
  1. 出生 → 父母基因决定外貌/天赋；
  2. 成长 → 事件塑造性格+学习技能；
  3. 成年 → 社会事件/命运驱动行为变化；
  4. 衰老 → 状态退化+疾病；
  5. 死亡 → 传记生成、资源/标签传承；
  6. 传承 → 新角色生成并继承前代片段。
  每个节点均写入“传记事件列表”，用于回顾、命运树构建或剧情生成。

#### 详细机制
- **出生**：从父母基因库随机/加权生成，决定外貌、天赋、天命（链接命运系统）。文化/生态影响（如平原高生育率）。
- **基因系统**：决定外貌（物理特征）、天赋（技能倾向）、天命（命运趋势，与M-命运.md整合）。基因与天赋整合：基因模板定义基础天赋ID，天赋影响命运趋势（如高天赋增加正面事件概率）。天命作为命运系统的初始片段，由基因权重计算。
- **教育与成长**：性格形成（五维模型驱动动机），学习（师从NPC、阅读、实践），结识朋友形成集体（链接J-家族与政治.md）。
- **人格模型**：性格五维+行为动机（e.g. 道德、文化驱动），传记系统记录关键事件（e.g. 事件节点影响后续命运）。
- **成年**：社会化经历事件（链接W-文化.md、K-科技.md），如参与战争或贸易。
- **衰老-死亡**：debuff累积（疾病链接S-生存.md，意外/战争链接历史），寿命受生态/科技影响。
- **延续后代**：传宗接代生成新角色，继承遗产（资源）、技术/知识（链接K-科技.md）、意志（道德/命运传承）、基因与天赋片段。