### 家族与政治系统与交互设计

- **家族结构**：每个“家族”记录为结构体：{家族ID、成员列表、传承机制、道德值、联盟/冲突记录}，储存在家族数据库中。
- **交互方式**：系统通过事件链触发家族互动，如联盟形成、冲突爆发、继承仪式，影响政治格局。与角色生命周期整合：在成年阶段通过政治事件影响角色行为，在死亡阶段处理传承机制。
- **数值表**：
  - `互动类型表`：如联盟、冲突、继承等，影响家族声望、资源、道德导向。
  - `道德影响矩阵`：定义不同互动在道德体系下的正负权重。
  - `事件链概率表`：计算事件在不同政治环境下的发生概率。
- **行为树设计**：每个家族绑定行为树模板（如“保守型”“扩张型”），通过关系数据库输入当前状态和事件，决定执行分支。链接生命周期：行为树在衰老阶段考虑继承事件。
- **状态机设计**：
  - 状态枚举如：稳定、扩张、衰退、内战。
  - 触发器：道德值变化、事件发生（如继承争端）、外部影响（如战争）。
  - 状态流转：如“扩张”→“冲突”→“决议”→“稳定”。
- **流程概览**：
  1. 系统监测家族状态；
  2. 触发事件链评估；
  3. 进入相应政治状态；
  4. 执行互动响应（联盟、冲突等）；
  5. 更新数据库并记录历史，与角色传记同步（参考R-角色生命周期.md）。

#### 与角色生命周期的整合
- **出生与成长阶段**：家族成员列表从出生时添加，教育事件影响初始道德值。
- **成年与衰老阶段**：政治事件驱动联盟/冲突，影响角色社会化。
- **死亡与传承**：传承机制激活，资源和道德值传递给后代。