### 生存系统与交互设计

- **需求结构**：每个“需求”记录为结构体：{需求ID、类型（饥饿、健康、情绪）、当前值、阈值、影响因素}，储存在角色个人状态中。
- **交互方式**：系统周期性检查角色的需求状态，匹配条件触发行为响应，如采集食物、寻求医疗、社交缓解情绪。与角色生命周期整合：在成长阶段需求影响教育事件，在衰老阶段增加健康debuff。
- **数值表**：
  - `需求类型表`：如饥饿、健康、情绪等，影响角色生存、效率、行为倾向。
  - `影响值矩阵`：定义不同事件对需求的正负影响权重。
  - `事件概率表`：计算随机事件在不同环境下的发生概率。
- **行为树设计**：每个角色绑定行为树模板（如“采集型”“求助型”），通过感知系统输入当前需求和环境，决定执行分支。链接生命周期：行为树在成年阶段整合社会生存需求。
- **状态机设计**：
  - 状态枚举如：正常、饥饿、受伤、沮丧。
  - 触发器：需求值低于阈值、事件发生（如受伤）、环境变化（如夜晚）。
  - 状态流转：如“饥饿”→“采集”→“满足”→“正常”。
- **流程概览**：
  1. 系统tick检查需求；
  2. 若需求不满足，触发行为树评估；
  3. 进入相应状态；
  4. 执行响应行动（采集、求医等）；
  5. 更新状态并记录事件，与传记事件列表同步（参考R-角色生命周期.md）。

#### 与角色生命周期的整合
- **出生与成长阶段**：初始需求由基因决定，教育事件影响情绪和健康阈值。
- **成年与衰老阶段**：生存事件驱动行为，衰老增加需求debuff。
- **死亡与传承**：生存记录影响后代初始需求值。